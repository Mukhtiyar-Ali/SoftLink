{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/toolbar/ui.toolbar.strategy.js)\r\n * Version: 21.2.4\r\n * Build date: Mon Dec 06 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../../core/renderer\";\nimport { noop } from \"../../core/utils/common\";\nimport { each } from \"../../core/utils/iterator\";\nimport { compileGetter } from \"../../core/utils/data\";\nimport Class from \"../../core/class\";\nvar abstract = Class.abstract;\nvar TOOLBAR_MENU_CONTAINER_CLASS = \"dx-toolbar-menu-container\";\nvar ToolbarStrategy = Class.inherit({\n  ctor: function ctor(toolbar) {\n    this._toolbar = toolbar;\n  },\n  _widgetOptions: function _widgetOptions() {\n    var itemClickAction = this._toolbar._createActionByOption(\"onItemClick\");\n\n    return {\n      itemTemplate: this._getMenuItemTemplate.bind(this),\n      onItemClick: function (e) {\n        this._toolbar.option(\"overflowMenuVisible\", false);\n\n        itemClickAction(e);\n      }.bind(this)\n    };\n  },\n  _getMenuItemTemplate: function _getMenuItemTemplate() {\n    return this._toolbar._getTemplateByOption(\"menuItemTemplate\");\n  },\n  _renderWidget: function _renderWidget() {\n    var $menu = $(\"<div>\").appendTo(this._menuContainer());\n    this._menu = this._toolbar._createComponent($menu, this._menuWidget(), this._widgetOptions());\n    this.renderMenuItems();\n  },\n  _menuContainer: abstract,\n  _menuWidget: abstract,\n  _hasVisibleMenuItems: function _hasVisibleMenuItems(items) {\n    var menuItems = items || this._toolbar.option(\"items\");\n\n    var result = false;\n    var optionGetter = compileGetter(\"visible\");\n    var overflowGetter = compileGetter(\"locateInMenu\");\n    each(menuItems, function (index, item) {\n      var itemVisible = optionGetter(item, {\n        functionsAsIs: true\n      });\n      var itemOverflow = overflowGetter(item, {\n        functionsAsIs: true\n      });\n\n      if (false !== itemVisible && (\"auto\" === itemOverflow || \"always\" === itemOverflow) || \"menu\" === item.location) {\n        result = true;\n      }\n    });\n    return result;\n  },\n  _getMenuItems: function _getMenuItems() {\n    return this._toolbar._getMenuItems();\n  },\n  _updateMenuVisibility: noop,\n  _renderMenuButtonContainer: function _renderMenuButtonContainer() {\n    var $afterSection = this._toolbar._$afterSection;\n    this._$menuButtonContainer = $(\"<div>\").appendTo($afterSection).addClass(this._toolbar._buttonClass()).addClass(TOOLBAR_MENU_CONTAINER_CLASS);\n  },\n  renderMenuItems: function renderMenuItems() {\n    this._menu && this._menu.option(\"items\", this._getMenuItems());\n  },\n  widgetOption: function widgetOption(name, value) {\n    this._menu && this._menu.option(name, value);\n  }\n});\nexport default ToolbarStrategy;","map":null,"metadata":{},"sourceType":"module"}