{"ast":null,"code":"import _classCallCheck from \"D:/SoftLink/Web Applictions/Standard Trading/Soft Link/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:/SoftLink/Web Applictions/Standard Trading/Soft Link/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Router } from '@angular/router';\nimport { UtilityServiceService } from 'app/utility-service.service';\nimport { tap } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"app/utility-service.service\";\nexport var SecurityService = /*#__PURE__*/(function () {\n  var SecurityService = /*#__PURE__*/function () {\n    function SecurityService(httpClient, router, utility) {\n      _classCallCheck(this, SecurityService);\n\n      this.httpClient = httpClient;\n      this.router = router;\n      this.utility = utility;\n    }\n\n    _createClass(SecurityService, [{\n      key: \"securityModel\",\n      get: function get() {\n        return this._securityModel;\n      },\n      set: function set(value) {\n        this._securityModel = value;\n      }\n    }, {\n      key: \"logout\",\n      value: function logout() {\n        this.clearSecurityModel();\n        sessionStorage.removeItem(\"angularBearerToken\");\n        sessionStorage.removeItem(\"canAccessCarDetail\");\n        UserName;\n        this.router.navigate([\"Login\"]);\n      }\n    }, {\n      key: \"clearSecurityModel\",\n      value: function clearSecurityModel() {\n        this.securityModel = {\n          userName: '',\n          isAuthenticated: false,\n          bearerToken: '',\n          canAccessCarDetail: false,\n          canAccessUserDetail: false\n        };\n      }\n    }, {\n      key: \"Login\",\n      value: function Login(userForm) {\n        var _this = this;\n\n        var httpOptions = {\n          headers: new HttpHeaders({\n            \"Content-Type\": \"application/json\"\n          })\n        };\n        return this.httpClient.post('https://localhost:44304/UserDetails/Login', userForm, httpOptions).pipe(tap(function (result) {\n          _this.clearSecurityModel();\n\n          Object.assign(_this.securityModel, result);\n\n          if (_this.securityModel.isAuthenticated) {\n            sessionStorage.setItem(\"angularBearerToken\", _this.securityModel.bearerToken); // sessionStorage.setItem(\"canAccessCategory\" ,JSON.stringify(this.securityModel.canAccessCategory));\n\n            sessionStorage.setItem(\"canAccessCarDetail\", \"\".concat(_this.securityModel.canAccessCarDetail));\n            sessionStorage.setItem(\"UserName\", \"\".concat(_this.securityModel.userName));\n          } else {\n            _this.clearSecurityModel();\n          }\n        }));\n      }\n    }]);\n\n    return SecurityService;\n  }();\n\n  SecurityService.ɵfac = function SecurityService_Factory(t) {\n    return new (t || SecurityService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.Router), i0.ɵɵinject(i3.UtilityServiceService));\n  };\n\n  SecurityService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: SecurityService,\n    factory: SecurityService.ɵfac,\n    providedIn: 'root'\n  });\n  return SecurityService;\n})();","map":null,"metadata":{},"sourceType":"module"}