{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/toolbar/ui.toolbar.strategy.drop_down_menu.js)\r\n * Version: 21.2.4\r\n * Build date: Mon Dec 06 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { extend } from \"../../core/utils/extend\";\nimport domAdapter from \"../../core/dom_adapter\";\nimport ToolbarStrategy from \"./ui.toolbar.strategy\";\nimport ToolbarMenu from \"./ui.toolbar.menu\";\nimport DropDownMenu from \"../drop_down_menu\";\nimport devices from \"../../core/devices\";\nvar MENU_INVISIBLE_CLASS = \"dx-state-invisible\";\nvar POPOVER_BOUNDARY_OFFSET = 10;\nvar DropDownMenuStrategy = ToolbarStrategy.inherit({\n  NAME: \"dropDownMenu\",\n  render: function render() {\n    if (!this._hasVisibleMenuItems()) {\n      return;\n    }\n\n    this._renderMenuButtonContainer();\n\n    this._renderWidget();\n  },\n  renderMenuItems: function renderMenuItems() {\n    if (!this._menu) {\n      this.render();\n    }\n\n    this.callBase();\n\n    if (this._menu && !this._menu.option(\"items\").length) {\n      this._menu.close();\n    }\n  },\n  _menuWidget: function _menuWidget() {\n    return DropDownMenu;\n  },\n  _widgetOptions: function _widgetOptions() {\n    var _this = this;\n\n    var topAndBottomOffset = 2 * POPOVER_BOUNDARY_OFFSET;\n    return extend(this.callBase(), {\n      deferRendering: true,\n      container: this._toolbar.option(\"menuContainer\"),\n      popupMaxHeight: \"android\" === devices.current().platform ? domAdapter.getDocumentElement().clientHeight - topAndBottomOffset : void 0,\n      menuWidget: ToolbarMenu,\n      onOptionChanged: function onOptionChanged(_ref) {\n        var name = _ref.name,\n            value = _ref.value;\n\n        if (\"opened\" === name) {\n          _this._toolbar.option(\"overflowMenuVisible\", value);\n        }\n\n        if (\"items\" === name) {\n          _this._updateMenuVisibility(value);\n        }\n      },\n      popupPosition: {\n        at: \"bottom right\",\n        my: \"top right\"\n      }\n    });\n  },\n  _updateMenuVisibility: function _updateMenuVisibility(menuItems) {\n    var items = menuItems || this._getMenuItems();\n\n    var isMenuVisible = items.length && this._hasVisibleMenuItems(items);\n\n    this._toggleMenuVisibility(isMenuVisible);\n  },\n  _toggleMenuVisibility: function _toggleMenuVisibility(value) {\n    if (!this._menuContainer()) {\n      return;\n    }\n\n    this._menuContainer().toggleClass(MENU_INVISIBLE_CLASS, !value);\n  },\n  _menuContainer: function _menuContainer() {\n    return this._$menuButtonContainer;\n  }\n});\nexport default DropDownMenuStrategy;","map":null,"metadata":{},"sourceType":"module"}